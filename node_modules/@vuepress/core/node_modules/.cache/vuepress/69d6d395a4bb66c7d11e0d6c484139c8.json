{"remainingRequest":"/home/lansong/MyStudyNote/node_modules/babel-loader/lib/index.js??ref--3-1!/home/lansong/MyStudyNote/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/lansong/MyStudyNote/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/lansong/MyStudyNote/node_modules/@vuepress/plugin-search/SearchBox.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/lansong/MyStudyNote/node_modules/@vuepress/plugin-search/SearchBox.vue","mtime":1708915343344},{"path":"/home/lansong/MyStudyNote/node_modules/cache-loader/dist/cjs.js","mtime":1708865839236},{"path":"/home/lansong/MyStudyNote/node_modules/babel-loader/lib/index.js","mtime":1708915344507},{"path":"/home/lansong/MyStudyNote/node_modules/cache-loader/dist/cjs.js","mtime":1708865839236},{"path":"/home/lansong/MyStudyNote/node_modules/vue-loader/lib/index.js","mtime":1708915344582}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnRyaW0uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmRleC1vZi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmlzLWFycmF5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLm1hdGNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgbWF0Y2hRdWVyeSBmcm9tICcuL21hdGNoLXF1ZXJ5JzsKLyogZ2xvYmFsIFNFQVJDSF9NQVhfU1VHR0VTVElPTlMsIFNFQVJDSF9QQVRIUywgU0VBUkNIX0hPVEtFWVMgKi8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnU2VhcmNoQm94JywKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcXVlcnk6ICcnLAogICAgICBmb2N1c2VkOiBmYWxzZSwKICAgICAgZm9jdXNJbmRleDogMCwKICAgICAgcGxhY2Vob2xkZXI6IHVuZGVmaW5lZAogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBzaG93U3VnZ2VzdGlvbnM6IGZ1bmN0aW9uIHNob3dTdWdnZXN0aW9ucygpIHsKICAgICAgcmV0dXJuIHRoaXMuZm9jdXNlZCAmJiB0aGlzLnN1Z2dlc3Rpb25zICYmIHRoaXMuc3VnZ2VzdGlvbnMubGVuZ3RoOwogICAgfSwKICAgIHN1Z2dlc3Rpb25zOiBmdW5jdGlvbiBzdWdnZXN0aW9ucygpIHsKICAgICAgdmFyIHF1ZXJ5ID0gdGhpcy5xdWVyeS50cmltKCkudG9Mb3dlckNhc2UoKTsKCiAgICAgIGlmICghcXVlcnkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBwYWdlcyA9IHRoaXMuJHNpdGUucGFnZXM7CiAgICAgIHZhciBtYXggPSB0aGlzLiRzaXRlLnRoZW1lQ29uZmlnLnNlYXJjaE1heFN1Z2dlc3Rpb25zIHx8IFNFQVJDSF9NQVhfU1VHR0VTVElPTlM7CiAgICAgIHZhciBsb2NhbGVQYXRoID0gdGhpcy4kbG9jYWxlUGF0aDsKICAgICAgdmFyIHJlcyA9IFtdOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYWdlcy5sZW5ndGg7IGkrKykgewogICAgICAgIGlmIChyZXMubGVuZ3RoID49IG1heCkgYnJlYWs7CiAgICAgICAgdmFyIHAgPSBwYWdlc1tpXTsgLy8gZmlsdGVyIG91dCByZXN1bHRzIHRoYXQgZG8gbm90IG1hdGNoIGN1cnJlbnQgbG9jYWxlCgogICAgICAgIGlmICh0aGlzLmdldFBhZ2VMb2NhbGVQYXRoKHApICE9PSBsb2NhbGVQYXRoKSB7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9IC8vIGZpbHRlciBvdXQgcmVzdWx0cyB0aGF0IGRvIG5vdCBtYXRjaCBzZWFyY2hhYmxlIHBhdGhzCgoKICAgICAgICBpZiAoIXRoaXMuaXNTZWFyY2hhYmxlKHApKSB7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CgogICAgICAgIGlmIChtYXRjaFF1ZXJ5KHF1ZXJ5LCBwKSkgewogICAgICAgICAgcmVzLnB1c2gocCk7CiAgICAgICAgfSBlbHNlIGlmIChwLmhlYWRlcnMpIHsKICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgcC5oZWFkZXJzLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgIGlmIChyZXMubGVuZ3RoID49IG1heCkgYnJlYWs7CiAgICAgICAgICAgIHZhciBoID0gcC5oZWFkZXJzW2pdOwoKICAgICAgICAgICAgaWYgKGgudGl0bGUgJiYgbWF0Y2hRdWVyeShxdWVyeSwgcCwgaC50aXRsZSkpIHsKICAgICAgICAgICAgICByZXMucHVzaChPYmplY3QuYXNzaWduKHt9LCBwLCB7CiAgICAgICAgICAgICAgICBwYXRoOiBwLnBhdGggKyAnIycgKyBoLnNsdWcsCiAgICAgICAgICAgICAgICBoZWFkZXI6IGgKICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiByZXM7CiAgICB9LAogICAgLy8gbWFrZSBzdWdnZXN0aW9ucyBhbGlnbiByaWdodCB3aGVuIHRoZXJlIGFyZSBub3QgZW5vdWdoIGl0ZW1zCiAgICBhbGlnblJpZ2h0OiBmdW5jdGlvbiBhbGlnblJpZ2h0KCkgewogICAgICB2YXIgbmF2Q291bnQgPSAodGhpcy4kc2l0ZS50aGVtZUNvbmZpZy5uYXYgfHwgW10pLmxlbmd0aDsKICAgICAgdmFyIHJlcG8gPSB0aGlzLiRzaXRlLnJlcG8gPyAxIDogMDsKICAgICAgcmV0dXJuIG5hdkNvdW50ICsgcmVwbyA8PSAyOwogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMucGxhY2Vob2xkZXIgPSB0aGlzLiRzaXRlLnRoZW1lQ29uZmlnLnNlYXJjaFBsYWNlaG9sZGVyIHx8ICcnOwogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMub25Ib3RrZXkpOwogIH0sCiAgYmVmb3JlRGVzdHJveTogZnVuY3Rpb24gYmVmb3JlRGVzdHJveSgpIHsKICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLm9uSG90a2V5KTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldFBhZ2VMb2NhbGVQYXRoOiBmdW5jdGlvbiBnZXRQYWdlTG9jYWxlUGF0aChwYWdlKSB7CiAgICAgIGZvciAodmFyIGxvY2FsZVBhdGggaW4gdGhpcy4kc2l0ZS5sb2NhbGVzIHx8IHt9KSB7CiAgICAgICAgaWYgKGxvY2FsZVBhdGggIT09ICcvJyAmJiBwYWdlLnBhdGguaW5kZXhPZihsb2NhbGVQYXRoKSA9PT0gMCkgewogICAgICAgICAgcmV0dXJuIGxvY2FsZVBhdGg7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gJy8nOwogICAgfSwKICAgIGlzU2VhcmNoYWJsZTogZnVuY3Rpb24gaXNTZWFyY2hhYmxlKHBhZ2UpIHsKICAgICAgdmFyIHNlYXJjaFBhdGhzID0gU0VBUkNIX1BBVEhTOyAvLyBhbGwgcGF0aHMgc2VhcmNoYWJsZXMKCiAgICAgIGlmIChzZWFyY2hQYXRocyA9PT0gbnVsbCkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CgogICAgICBzZWFyY2hQYXRocyA9IEFycmF5LmlzQXJyYXkoc2VhcmNoUGF0aHMpID8gc2VhcmNoUGF0aHMgOiBuZXcgQXJyYXkoc2VhcmNoUGF0aHMpOwogICAgICByZXR1cm4gc2VhcmNoUGF0aHMuZmlsdGVyKGZ1bmN0aW9uIChwYXRoKSB7CiAgICAgICAgcmV0dXJuIHBhZ2UucGF0aC5tYXRjaChwYXRoKTsKICAgICAgfSkubGVuZ3RoID4gMDsKICAgIH0sCiAgICBvbkhvdGtleTogZnVuY3Rpb24gb25Ib3RrZXkoZXZlbnQpIHsKICAgICAgaWYgKGV2ZW50LnNyY0VsZW1lbnQgPT09IGRvY3VtZW50LmJvZHkgJiYgU0VBUkNIX0hPVEtFWVMuaW5jbHVkZXMoZXZlbnQua2V5KSkgewogICAgICAgIHRoaXMuJHJlZnMuaW5wdXQuZm9jdXMoKTsKICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB9CiAgICB9LAogICAgb25VcDogZnVuY3Rpb24gb25VcCgpIHsKICAgICAgaWYgKHRoaXMuc2hvd1N1Z2dlc3Rpb25zKSB7CiAgICAgICAgaWYgKHRoaXMuZm9jdXNJbmRleCA+IDApIHsKICAgICAgICAgIHRoaXMuZm9jdXNJbmRleC0tOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmZvY3VzSW5kZXggPSB0aGlzLnN1Z2dlc3Rpb25zLmxlbmd0aCAtIDE7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgb25Eb3duOiBmdW5jdGlvbiBvbkRvd24oKSB7CiAgICAgIGlmICh0aGlzLnNob3dTdWdnZXN0aW9ucykgewogICAgICAgIGlmICh0aGlzLmZvY3VzSW5kZXggPCB0aGlzLnN1Z2dlc3Rpb25zLmxlbmd0aCAtIDEpIHsKICAgICAgICAgIHRoaXMuZm9jdXNJbmRleCsrOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmZvY3VzSW5kZXggPSAwOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGdvOiBmdW5jdGlvbiBnbyhpKSB7CiAgICAgIGlmICghdGhpcy5zaG93U3VnZ2VzdGlvbnMpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHRoaXMuc3VnZ2VzdGlvbnNbaV0ucGF0aCk7CiAgICAgIHRoaXMucXVlcnkgPSAnJzsKICAgICAgdGhpcy5mb2N1c0luZGV4ID0gMDsKICAgIH0sCiAgICBmb2N1czogZnVuY3Rpb24gZm9jdXMoaSkgewogICAgICB0aGlzLmZvY3VzSW5kZXggPSBpOwogICAgfSwKICAgIHVuZm9jdXM6IGZ1bmN0aW9uIHVuZm9jdXMoKSB7CiAgICAgIHRoaXMuZm9jdXNJbmRleCA9IC0xOwogICAgfQogIH0KfTs="},{"version":3,"sources":["/home/lansong/MyStudyNote/node_modules/@vuepress/plugin-search/SearchBox.vue"],"names":["matchQuery","name","data","query","focused","focusIndex","placeholder","undefined","computed","showSuggestions","suggestions","length","trim","toLowerCase","pages","$site","max","themeConfig","searchMaxSuggestions","SEARCH_MAX_SUGGESTIONS","localePath","$localePath","res","i","p","getPageLocalePath","isSearchable","push","headers","j","h","title","Object","assign","path","slug","header","alignRight","navCount","nav","repo","mounted","searchPlaceholder","document","addEventListener","onHotkey","beforeDestroy","removeEventListener","methods","page","locales","indexOf","searchPaths","SEARCH_PATHS","Array","isArray","filter","match","event","srcElement","body","SEARCH_HOTKEYS","includes","key","$refs","input","focus","preventDefault","onUp","onDown","go","$router","unfocus"],"mappings":"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","sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport matchQuery from './match-query'\n\n/* global SEARCH_MAX_SUGGESTIONS, SEARCH_PATHS, SEARCH_HOTKEYS */\nexport default {\n  name: 'SearchBox',\n\n  data () {\n    return {\n      query: '',\n      focused: false,\n      focusIndex: 0,\n      placeholder: undefined\n    }\n  },\n\n  computed: {\n    showSuggestions () {\n      return (\n        this.focused\n        && this.suggestions\n        && this.suggestions.length\n      )\n    },\n\n    suggestions () {\n      const query = this.query.trim().toLowerCase()\n      if (!query) {\n        return\n      }\n\n      const { pages } = this.$site\n      const max = this.$site.themeConfig.searchMaxSuggestions || SEARCH_MAX_SUGGESTIONS\n      const localePath = this.$localePath\n      const res = []\n      for (let i = 0; i < pages.length; i++) {\n        if (res.length >= max) break\n        const p = pages[i]\n        // filter out results that do not match current locale\n        if (this.getPageLocalePath(p) !== localePath) {\n          continue\n        }\n\n        // filter out results that do not match searchable paths\n        if (!this.isSearchable(p)) {\n          continue\n        }\n\n        if (matchQuery(query, p)) {\n          res.push(p)\n        } else if (p.headers) {\n          for (let j = 0; j < p.headers.length; j++) {\n            if (res.length >= max) break\n            const h = p.headers[j]\n            if (h.title && matchQuery(query, p, h.title)) {\n              res.push(Object.assign({}, p, {\n                path: p.path + '#' + h.slug,\n                header: h\n              }))\n            }\n          }\n        }\n      }\n      return res\n    },\n\n    // make suggestions align right when there are not enough items\n    alignRight () {\n      const navCount = (this.$site.themeConfig.nav || []).length\n      const repo = this.$site.repo ? 1 : 0\n      return navCount + repo <= 2\n    }\n  },\n\n  mounted () {\n    this.placeholder = this.$site.themeConfig.searchPlaceholder || ''\n    document.addEventListener('keydown', this.onHotkey)\n  },\n\n  beforeDestroy () {\n    document.removeEventListener('keydown', this.onHotkey)\n  },\n\n  methods: {\n    getPageLocalePath (page) {\n      for (const localePath in this.$site.locales || {}) {\n        if (localePath !== '/' && page.path.indexOf(localePath) === 0) {\n          return localePath\n        }\n      }\n      return '/'\n    },\n\n    isSearchable (page) {\n      let searchPaths = SEARCH_PATHS\n\n      // all paths searchables\n      if (searchPaths === null) { return true }\n\n      searchPaths = Array.isArray(searchPaths) ? searchPaths : new Array(searchPaths)\n\n      return searchPaths.filter(path => {\n        return page.path.match(path)\n      }).length > 0\n    },\n\n    onHotkey (event) {\n      if (event.srcElement === document.body && SEARCH_HOTKEYS.includes(event.key)) {\n        this.$refs.input.focus()\n        event.preventDefault()\n      }\n    },\n\n    onUp () {\n      if (this.showSuggestions) {\n        if (this.focusIndex > 0) {\n          this.focusIndex--\n        } else {\n          this.focusIndex = this.suggestions.length - 1\n        }\n      }\n    },\n\n    onDown () {\n      if (this.showSuggestions) {\n        if (this.focusIndex < this.suggestions.length - 1) {\n          this.focusIndex++\n        } else {\n          this.focusIndex = 0\n        }\n      }\n    },\n\n    go (i) {\n      if (!this.showSuggestions) {\n        return\n      }\n      this.$router.push(this.suggestions[i].path)\n      this.query = ''\n      this.focusIndex = 0\n    },\n\n    focus (i) {\n      this.focusIndex = i\n    },\n\n    unfocus () {\n      this.focusIndex = -1\n    }\n  }\n}\n"]}]}